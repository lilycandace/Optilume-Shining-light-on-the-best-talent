{% extends 'mysite/base.html' %}
{% load static %}
{#<!DOCTYPE html>#}
{#<html>#}
{#<head>#}
{% block link_section %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href={% static 'mysite/css/bootstrap.min.css' %}>
    <script src={% static 'mysite/js/jquery.min.js' %}></script>
    <script src={% static 'mysite/js/bootstrap.min.js' %}></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
      integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
 
{% endblock %}
{#</head>#}
{#<body>#}

{% block body %}
    <section class="section-hero overlay inner-page bg-image"
             style="background-image: url({% static 'mysite/images/hero_1.jpg' %});" id="home-section">
        <div class="container">
            <div class="row">
                <div class="col-md-7">
                    <h1 class="text-white font-weight-bold">Shortlisted Candidates</h1>
                    <div class="custom-breadcrumbs">
                        <a href="#">Home</a> <span class="mx-2 slash">/</span>
                        <span class="text-white"><strong>{{ company_name }}</strong></span>
                        <span class="text-white mx-2 slash"><strong>/</strong></span>
                        <span class="text-white"><strong>{{ title }}</strong></span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="site-section">
        <div class="container">
              <button class="btn btn-info" onclick="downloadPDF()">Download as PDF</button>
             <li class="btn btn-info"><a href="http://localhost:8501/" target="_blank">GenAI</a></li>

        <div id="content">
    <h2>Shortlisted Candidates: </h2>
    
 <table class="table table-striped table-bordered table-hover table-condensed">
        <thead>
        <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Score (KNN distance)</th>

        </tr>
        </thead>
        <tbody>
        {% for -, item in items.items %}
        <tr>
            <td>{{ item.rank }}</td>
            <td>{{ item.name }}</td>
            <td>{{ item.score }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>
   
</div>
    </section>
    <script>
    function downloadPDF() {
      const element = document.getElementById("content");

      const opt = {
        margin:       0.5,
        filename:     'downloaded.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
      };

      html2pdf().set(opt).from(element).save();
    }
  </script>
{% endblock %}
<!-- <script>
      const button = document.getElementById("download-button");

      function generatePDF() {
        // Choose the element that your content will be rendered to.
        const element = document.getElementById("invoice");
        // Choose the element and save the PDF for your user.
        html2pdf().from(element).save();
      }

      button.addEventListener("click", generatePDF);
    </script> -->
    <script>
    function downloadPDF() {
      const element = document.getElementById('content');
      html2pdf().from(element).save('download.pdf');
    }
  </script>
{#</body>#}
{#</html>#}
